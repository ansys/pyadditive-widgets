
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/00_single_bead_study.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_gallery_examples_00_single_bead_study.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_00_single_bead_study.py:


Single bead evaluation plot
===========================

This example shows how you can use PyAdditive-Wdigets to visualize the results
of a parametric study containing single bead simulations.
The :obj:`display <ansys.additive.widgets.display>` package is used to
visualize the results of the study.

Units are SI (m, kg, s, K) unless otherwise noted.

.. GENERATED FROM PYTHON SOURCE LINES 34-37

Perform required imports and create a study
-------------------------------------------
Perform the required import and create a :class:`ParametricStudy` instance.

.. GENERATED FROM PYTHON SOURCE LINES 37-44

.. code-block:: Python

    from ansys.additive.core import Additive, SimulationStatus, SimulationType
    from ansys.additive.core.parametric_study import ColumnNames, ParametricStudy

    from ansys.additive.widgets import display

    study = ParametricStudy("single-bead-study")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Saving parametric study to /home/runner/work/pyadditive-widgets/pyadditive-widgets/examples/single-bead-study.ps




.. GENERATED FROM PYTHON SOURCE LINES 45-50

Get the study file name
-----------------------
The current state of the parametric study is saved to a file upon each
update. You can retrieve the name of the file as shown below. This file
uses a binary format and is not human readable.

.. GENERATED FROM PYTHON SOURCE LINES 50-53

.. code-block:: Python


    print(study.file_name)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    /home/runner/work/pyadditive-widgets/pyadditive-widgets/examples/single-bead-study.ps




.. GENERATED FROM PYTHON SOURCE LINES 54-59

Select a material for the study
-------------------------------
Select a material to use in the study. The material name must be known by
the Additive service. You can connect to the Additive service
and print a list of available materials prior to selecting one.

.. GENERATED FROM PYTHON SOURCE LINES 59-64

.. code-block:: Python


    additive = Additive()
    additive.materials_list()
    material = "IN718"





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    2024-04-30 21:55:58 Connected to dns:///localhost:50052
    user data path: /home/runner/.local/share/pyadditive




.. GENERATED FROM PYTHON SOURCE LINES 65-73

Create a single bead evaluation
-------------------------------
Here, the :meth:`~ParametricStudy.generate_single_bead_permutations` method is used to
generate single bead simulation permutations. The parameters
for the :meth:`~ParametricStudy.generate_single_bead_permutations` method allow you to
specify a range of machine parameters and filter them by energy density. Not all
the parameters shown are required. Optional parameters that are not specified
use default values defined in the :class:`MachineConstants` class.

.. GENERATED FROM PYTHON SOURCE LINES 73-104

.. code-block:: Python

    import numpy as np

    # Specify a range of laser powers. Valid values are 50 to 700 W.
    initial_powers = np.linspace(50, 700, 7)
    # Specify a range of laser scan speeds. Valid values are 0.35 to 2.5 m/s.
    initial_scan_speeds = np.linspace(0.35, 2.5, 5)
    # Specify powder layer thicknesses. Valid values are 10e-6 to 100e-6 m.
    initial_layer_thicknesses = [40e-6, 50e-6]
    # Specify laser beam diameters. Valid values are 20e-6 to 140e-6 m.
    initial_beam_diameters = [80e-6]
    # Specify heater temperatures. Valid values are 20 - 500 C.
    initial_heater_temps = [80]
    # Restrict the permutations within a range of energy densities
    # For single bead, the energy density is laser power / (laser scan speed * layer thickness).
    min_energy_density = 2e6
    max_energy_density = 8e6
    # Specify a bead length in meters.
    bead_length = 0.001

    study.generate_single_bead_permutations(
        material_name=material,
        bead_length=bead_length,
        laser_powers=initial_powers,
        scan_speeds=initial_scan_speeds,
        layer_thicknesses=initial_layer_thicknesses,
        beam_diameters=initial_beam_diameters,
        heater_temperatures=initial_heater_temps,
        min_area_energy_density=min_energy_density,
        max_area_energy_density=max_energy_density,
    )








.. GENERATED FROM PYTHON SOURCE LINES 105-109

Show the simulations as a table
-------------------------------
You can use the :obj:`display <ansys.additive.widgets.display>`
package to list the simulations as a table.

.. GENERATED FROM PYTHON SOURCE LINES 109-112

.. code-block:: Python


    display.show_table(study)




.. image-sg:: /examples/gallery_examples/images/sphx_glr_00_single_bead_study_001.png
   :alt: 00 single bead study
   :srcset: /examples/gallery_examples/images/sphx_glr_00_single_bead_study_001.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    show_table



.. GENERATED FROM PYTHON SOURCE LINES 113-121

Skip some simulations
---------------------
If you are working with a large parametric study, you may want to skip some
simulations to reduce processing time. To do so, set the simulation status
to :obj:`SimulationStatus.SKIP` which is defined in the :class:`SimulationStatus`
class. Here, a :class:`~pandas.DataFrame` object is obtained, a filter is
applied to get a list of simulation IDs, and then the status is updated on the
simulations with those IDs.

.. GENERATED FROM PYTHON SOURCE LINES 121-131

.. code-block:: Python


    df = study.data_frame()
    # Get IDs for single bead simulations with laser power below 75 W.
    ids = df.loc[
        (df[ColumnNames.LASER_POWER] < 75) & (df[ColumnNames.TYPE] == SimulationType.SINGLE_BEAD),
        ColumnNames.ID,
    ].tolist()
    study.set_status(ids, SimulationStatus.SKIP)
    display.show_table(study)




.. image-sg:: /examples/gallery_examples/images/sphx_glr_00_single_bead_study_002.png
   :alt: 00 single bead study
   :srcset: /examples/gallery_examples/images/sphx_glr_00_single_bead_study_002.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    show_table



.. GENERATED FROM PYTHON SOURCE LINES 132-136

Run single bead simulations
---------------------------
Run the simulations using the :meth:`~ParametricStudy.run_simulations` method. All simulations
with a :obj:`SimulationStatus.PENDING` status are executed.

.. GENERATED FROM PYTHON SOURCE LINES 136-139

.. code-block:: Python


    study.run_simulations(additive)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    2024-04-30 21:56:31 Completed 0 of 31 simulations    2024-04-30 21:56:54 Completed 1 of 31 simulations    2024-04-30 21:57:08 Completed 2 of 31 simulations    2024-04-30 21:57:21 Completed 3 of 31 simulations    2024-04-30 21:57:33 Completed 4 of 31 simulations    2024-04-30 21:57:47 Completed 5 of 31 simulations    2024-04-30 21:58:01 Completed 6 of 31 simulations    2024-04-30 21:58:14 Completed 7 of 31 simulations    2024-04-30 21:58:26 Completed 8 of 31 simulations    2024-04-30 21:58:40 Completed 9 of 31 simulations    2024-04-30 21:58:54 Completed 10 of 31 simulations    2024-04-30 21:59:11 Completed 11 of 31 simulations    2024-04-30 21:59:24 Completed 12 of 31 simulations    2024-04-30 21:59:36 Completed 13 of 31 simulations    2024-04-30 21:59:50 Completed 14 of 31 simulations    2024-04-30 22:00:02 Completed 15 of 31 simulations    2024-04-30 22:00:16 Completed 16 of 31 simulations    2024-04-30 22:00:32 Completed 17 of 31 simulations    2024-04-30 22:00:45 Completed 18 of 31 simulations    2024-04-30 22:00:57 Completed 19 of 31 simulations    2024-04-30 22:01:11 Completed 20 of 31 simulations    2024-04-30 22:01:25 Completed 21 of 31 simulations    2024-04-30 22:01:41 Completed 22 of 31 simulations    2024-04-30 22:01:57 Completed 23 of 31 simulations    2024-04-30 22:02:21 Completed 24 of 31 simulations    2024-04-30 22:02:43 Completed 25 of 31 simulations    2024-04-30 22:02:56 Completed 26 of 31 simulations    2024-04-30 22:03:12 Completed 27 of 31 simulations    2024-04-30 22:03:27 Completed 28 of 31 simulations    2024-04-30 22:03:50 Completed 29 of 31 simulations    2024-04-30 22:04:06 Completed 30 of 31 simulations    2024-04-30 22:04:21 Completed 31 of 31 simulations




.. GENERATED FROM PYTHON SOURCE LINES 140-144

Plot single bead results
------------------------
Plot the single bead results using the
:func:`~ansys.additive.widgets.display.single_bead_eval_plot` method.

.. GENERATED FROM PYTHON SOURCE LINES 144-146

.. code-block:: Python


    display.single_bead_eval_plot(study)



.. image-sg:: /examples/gallery_examples/images/sphx_glr_00_single_bead_study_003.png
   :alt: 00 single bead study
   :srcset: /examples/gallery_examples/images/sphx_glr_00_single_bead_study_003.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    single_bead_eval_plot




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (8 minutes 25.243 seconds)


.. _sphx_glr_download_examples_gallery_examples_00_single_bead_study.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 00_single_bead_study.ipynb <00_single_bead_study.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 00_single_bead_study.py <00_single_bead_study.py>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
